"use strict";(self.webpackChunk_discretize_react_discretize_components=self.webpackChunk_discretize_react_discretize_components||[]).push([[662],{"../gw2-ui/src/builder/attributes.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={POWER:"Power",PRECISION:"Precision",TOUGHNESS:"Toughness",VITALITY:"Vitality",CONCENTRATION:"BoonDuration",CONDITION_DAMAGE:"ConditionDamage",EXPERTISE:"ConditionDuration",FEROCITY:"CritDamage",HEALING_POWER:"Healing"}},"../gw2-ui/src/components/DetailsFact/DetailsFact.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>DetailsFact_DetailsFact});var clsx=__webpack_require__("../node_modules/.pnpm/clsx@2.1.1/node_modules/clsx/dist/clsx.mjs"),apiAttributes=(__webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js"),__webpack_require__("../gw2-ui/src/helpers/apiAttributes.ts"));function formatDuration(value){let seconds=value;const weeks=Math.floor(seconds/604800);seconds%=604800;const days=Math.floor(seconds/86400);seconds%=86400;const hours=Math.floor(seconds/3600);seconds%=3600;const minutes=Math.floor(seconds/60);return seconds%=60,[weeks&&`${weeks} w`,days&&`${days} d`,hours&&`${hours} h`,minutes&&`${minutes} m`,seconds&&`${seconds}${minutes?" s":"s"}`].filter((entry=>!!entry)).join(", ")}var injectStylesIntoStyleTag=__webpack_require__("../node_modules/.pnpm/style-loader@3.3.4_webpack@5.94.0_esbuild@0.23.1_/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("../node_modules/.pnpm/style-loader@3.3.4_webpack@5.94.0_esbuild@0.23.1_/node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("../node_modules/.pnpm/style-loader@3.3.4_webpack@5.94.0_esbuild@0.23.1_/node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("../node_modules/.pnpm/style-loader@3.3.4_webpack@5.94.0_esbuild@0.23.1_/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("../node_modules/.pnpm/style-loader@3.3.4_webpack@5.94.0_esbuild@0.23.1_/node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("../node_modules/.pnpm/style-loader@3.3.4_webpack@5.94.0_esbuild@0.23.1_/node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),DetailsFact_module=__webpack_require__("../node_modules/.pnpm/css-loader@6.11.0_webpack@5.94.0_esbuild@0.23.1_/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[12].use[1]!../gw2-ui/src/components/DetailsFact/DetailsFact.module.css"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(DetailsFact_module.A,options);const DetailsFact_DetailsFact_module=DetailsFact_module.A&&DetailsFact_module.A.locals?DetailsFact_module.A.locals:void 0;var Icon=__webpack_require__("../gw2-ui/src/components/Icon/Icon.tsx"),attributes=__webpack_require__("../gw2-ui/src/builder/attributes.ts"),capitalize=__webpack_require__("../gw2-ui/src/helpers/capitalize.ts"),jsx_runtime=__webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js");const getKeyValue=data=>{let key,value,count;switch(data.type){case"AttributeAdjust":{const{text,value:factValue,target}=data,attribute=!text&&target&&apiAttributes.A[target];key=attribute?`${attribute} Increase`:text,value=`${!text||text.endsWith("Increase")?"+":""}${Number(factValue).toLocaleString()}`;break}case"Buff":{const{duration,status,description,apply_count:applyCount}=data;key=duration?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[status,(0,jsx_runtime.jsx)("span",{className:DetailsFact_DetailsFact_module.headerFact,children:`(${formatDuration(duration)})`})]}):status,value=description,count=applyCount;break}case"BuffConversion":{const{percent,source,target}=data,getAttr=target=>(0,capitalize.Z)(Object.keys(attributes.A).find((key=>attributes.A[key]===target))||target);key=(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Gain ",getAttr(target)," based on a percentage of ",getAttr(source)]}),value=`${percent}%`;break}case"ComboField":{const{text,field_type:fieldType}=data;key=text,value=fieldType;break}case"ComboFinisher":{const{text,percent,finisher_type:finisherType}=data;key=text,value=`${finisherType}${void 0!==percent&&0!==percent&&100!==percent?` (${percent}% Chance)`:""}`;break}case"Damage":{const{text,hit_count:hitCount,dmg_multiplier:dmgMultiplier}=data;key=hitCount>1?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[text,(0,jsx_runtime.jsx)("span",{className:DetailsFact_DetailsFact_module.headerFact,children:`(${hitCount}x)`})]}):text,value=Math.round(dmgMultiplier/2597*1047500);break}case"Distance":{const{text,distance}=data;key=text,value=distance;break}case"Duration":{const{text,duration}=data;key=text,value=duration;break}case"Heal":{const{text,hit_count:hitCount}=data;key=text,value=`${hitCount}x`;break}case"HealingAdjust":{const{text,hit_count:hitCount}=data;key=text,value=`${hitCount}x`;break}case"NoData":{const{text}=data;value=text;break}case"Number":{const{text,value:factValue}=data;key=text,value=factValue;break}case"Percent":{const{text,percent}=data;key=text,value=`${percent}%`;break}case"PrefixedBuff":{const{text,duration,status,description,apply_count:applyCount}=data;key=duration?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[status,(0,jsx_runtime.jsx)("span",{className:DetailsFact_DetailsFact_module.headerFact,children:`(${duration}s)`})]}):text,value=description,count=applyCount;break}case"Radius":{const{text,distance}=data;key=text,value=distance;break}case"Range":{const{text,value:factValue}=data;key=text,value=Number(factValue).toLocaleString();break}case"Recharge":{const{text,value:factValue}=data;key=text,value=factValue;break}case"StunBreak":value="Breaks Stun";break;case"Time":{const{text,duration}=data;key=text,value=`${duration} second${duration>1?"s":""}`;break}case"Unblockable":{const{text}=data;value=text;break}default:{console.warn("Unknown fact type",data);const d=data;key=d.text||Math.random(),value=`Unknown fact type: ${d.type}`;break}}return{key,value,count}},DetailsFact_DetailsFact=_ref=>{let{facts,className}=_ref;return(0,jsx_runtime.jsx)("div",{className:(0,clsx.A)(className),children:facts.map((fact=>({...getKeyValue(fact),icon:fact.icon}))).map(((_ref2,index)=>{let{key,value,count,icon}=_ref2;return(0,jsx_runtime.jsxs)("div",{className:DetailsFact_DetailsFact_module.factRoot,children:[(0,jsx_runtime.jsx)("div",{className:DetailsFact_DetailsFact_module.factIconWrapper,children:icon&&(0,jsx_runtime.jsx)(Icon.A,{className:DetailsFact_DetailsFact_module.factIcon,src:icon,applyCount:count})}),(0,jsx_runtime.jsxs)("div",{className:DetailsFact_DetailsFact_module.factText,children:[key,key?": ":"",value," "]})]},`${key}-${value}-${count}-${index}`)}))})};try{DetailsFact.displayName="DetailsFact",DetailsFact.__docgenInfo={description:"",displayName:"DetailsFact",props:{facts:{defaultValue:null,description:"",name:"facts",required:!0,type:{name:"GW2ApiFact[]"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../gw2-ui/src/components/DetailsFact/DetailsFact.tsx#DetailsFact"]={docgenInfo:DetailsFact.__docgenInfo,name:"DetailsFact",path:"../gw2-ui/src/components/DetailsFact/DetailsFact.tsx#DetailsFact"})}catch(__react_docgen_typescript_loader_error){}},"../gw2-ui/src/gw2api/hooks.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{wB:()=>useItems,Pt:()=>useSkill,KI:()=>useTrait});var react=__webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js"),i18n=__webpack_require__("../gw2-ui/src/i18n/index.ts");const FETCH_OPTIONS={method:"GET",mode:"cors",credentials:"omit",redirect:"error"};function isObjectWithId(o){return function isPlainObject(o){return"object"==typeof o&&null!==o&&Object.getPrototypeOf(o)===Object.prototype}(o)&&"id"in o&&"number"==typeof o.id&&Number.isInteger(o.id)&&o.id>0}const isSSR="undefined"==typeof document;class APICache{cache=(()=>new Map)();requests_inflight=0;callbacks=(()=>new Set)();requested_ids=(()=>new Set)();fetched_ids=(()=>new Set)();fetch_delay_timeout=null;overrides=[];constructor(path){let language=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",max_ids_per_request=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,max_concurrent_requests=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.path=path,this.language=language,this.max_ids_per_request=max_ids_per_request,this.max_concurrent_requests=max_concurrent_requests}getMultiple(ids,callback){let missing=0;for(const id of ids)this.cache.has(id)||(this.requested_ids.add(id),missing++);!isSSR&&missing>0&&(this.callbacks.add(callback),this.fetchLater());const map={};let errors=null;for(const id of ids){const item=this.cache.get(id);void 0===item?missing++:404===item||500===item?(errors||(errors={}),errors[id]=item):map[id]=item}return{loading:missing>0,errors,data:map}}getOne(id,callback){const res=this.getMultiple([id],callback),item=res.data[id];return res.loading?{loading:!0,error:!1,data:null}:res.errors?{loading:!1,error:res.errors[id],data:null}:item?{loading:!1,error:!1,data:item}:(console.error("APICache: invalid state reached",id,res),{loading:!1,error:500,data:null})}fetchLater(){this.fetch_delay_timeout||(this.fetch_delay_timeout=setTimeout((()=>{this.fetch_delay_timeout=null,this.tryFetch()}),0))}async tryFetch(){if(this.max_concurrent_requests-this.requests_inflight<1)return;if(this.requested_ids.size<=this.fetched_ids.size)return;const ids=[];for(const id of this.requested_ids.values())if(this.fetched_ids.has(id)||ids.push(id),ids.length>=this.max_ids_per_request)break;if(ids.length<1)return;this.requests_inflight++;for(const id of ids)this.fetched_ids.add(id);let response,error=404;try{ids.sort(((a,b)=>a-b));const url="https://api.guildwars2.com"+this.path+"?ids="+ids.join(",")+"&lang="+this.language,res=await fetch(url,FETCH_OPTIONS);if(404===res.status)response=[];else{if(!res.ok)throw new Error(`HTTP Error: ${res.status}`);const json=await res.json();if(!(json instanceof Array))throw new Error("Response is not a list");response=json}}catch(e){error=500,response=[],console.error(e)}this.requests_inflight--;const returned={};for(const o of response)isObjectWithId(o)?returned[o.id]=o:console.error("Response contains unexpected value",o);for(const id of ids){let item=returned[id];const fixed_item=this.fixItem(id,item);item=fixed_item instanceof Promise?await fixed_item:fixed_item,item?this.cache.set(id,item):this.cache.set(id,error),this.requested_ids.delete(id),this.fetched_ids.delete(id)}const callbacks=[...this.callbacks];this.callbacks.clear();for(const c of callbacks)try{c()}catch(e){console.error("callback failed",e)}this.tryFetch()}fixItem(id,item){let fixed_item=item;for(let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i<this.overrides.length;i++){const f=this.overrides[i];try{const res=f(id,fixed_item);if(res instanceof Promise)return res.then((item=>this.fixItem(id,item,i+1)),(e=>(console.error("Error in async override",e),fixed_item)));fixed_item=res}catch(e){console.error("Error in override",e)}}return fixed_item}addOverride(f){this.overrides.push(f)}}let descriptions,skills;function mapWithDescriptions(f){return null===descriptions?f(null):(void 0===descriptions&&(descriptions=function load_descriptions(){return __webpack_require__.e(618).then(__webpack_require__.bind(__webpack_require__,"../gw2-ui/src/gw2api/overrides/data/descriptions.ts")).then((res=>{descriptions=res})).catch((e=>{console.warn("Error loading description overrides",e),descriptions=null}))}()),descriptions instanceof Promise?descriptions.then((()=>mapWithDescriptions(f))):f(descriptions))}function mapWithSkills(f){return null===skills?f(null):(void 0===skills&&(skills=function load_skills(){return __webpack_require__.e(811).then(__webpack_require__.bind(__webpack_require__,"../gw2-ui/src/gw2api/overrides/data/skills.ts")).then((res=>{skills=res})).catch((e=>{console.warn("Error loading skill overrides",e),skills=null}))}()),skills instanceof Promise?skills.then((()=>mapWithSkills(f))):f(skills))}const MISSING_IDS=new Set([62797,62980,62951,62893,62926,62966,62772,62918,62930,62732,62789,62885,41258,40635,42449,40015,42898,45022,40679,45128,42008,42925,42986,41968,41836,40988,44455,63362,63167,63220,63160,63249,63298,63263,63288,63264,63348,63047]);function make_chat_link(_id){let id=_id,l=String.fromCharCode(6);for(let i=0;i<3;i++){const next_byte=id%256;l+=String.fromCharCode(next_byte),id>>=8}return l+=String.fromCharCode(0),`[&${btoa(l)}]`}function fix_fact(f){!f.type&&"percent"in f&&(f.type="Percent"),"Percent"===f.type&&"value"in f&&(f.percent=f.value,delete f.value)}function fix_facts(facts){if(facts)for(const f of facts)fix_fact(f)}const common_details={duration_ms:36e5,apply_count:1,name:"Nourishment",icon:"https://render.guildwars2.com/file/779D3F0ABE5B46C09CFC57374DA8CC3A495F291C/436367.png"};const SKILL_OVERRIDES=[function fixMissingSkills(id,item){return!MISSING_IDS.has(id)||item?item:mapWithSkills((skills=>{const skill=skills?.missing_skills[id];if(skill)return{id,chat_link:make_chat_link(id),...skill}}))},function fixFactsInSkill(id,item){return item?(fix_facts(item.facts),fix_facts(item.traited_facts),item):item},function fixSkillTypes(id,item){return item?("Transform"===item.type&&(item.type="Profession"),"Transform_1"===item.slot&&(item.slot="Profession_1"),item):item}],TRAIT_OVERRIDES=[function fixFactsInTrait(id,item){if(!item)return item;if(fix_facts(item.facts),fix_facts(item.traited_facts),item.skills)for(const s of item.skills)fix_facts(s.facts),fix_facts(s.traited_facts);return item},function fixMissingTraitDescriptions(id,trait){return!trait||trait.description?trait:mapWithDescriptions((descriptions=>({description:descriptions?.traits[id]||"",...trait})))}],ITEM_OVERRIDES=[function fixAscendedConsumable(id,item){return item&&"Consumable"===item.type&&"Ascended"===item.rarity&&"Food"===item.details.type?mapWithDescriptions((descriptions=>{const description=descriptions?.food[id]||"";return{...item,details:{...common_details,description,...item.details}}})):item}];function getCache(record,path,language,max_ids_per_request,max_concurrent_requests,overrides){let cache=record[language];if(!cache){if(cache=new APICache(path,language,max_ids_per_request,max_concurrent_requests),overrides)for(const f of overrides)cache.addOverride(f);record[language]=cache}return cache}const CACHE_SKILLS={};function skillCache(lang){return getCache(CACHE_SKILLS,"/v2/skills",lang,200,1,SKILL_OVERRIDES)}function useSkill(id){const lang=(0,i18n.i$)(),[,forceRedraw]=react.useReducer((i=>i+1),0);return skillCache(lang).getOne(id,forceRedraw)}const CACHE_TRAITS={};function traitCache(lang){return getCache(CACHE_TRAITS,"/v2/traits",lang,200,1,TRAIT_OVERRIDES)}function useTrait(id){const lang=(0,i18n.i$)(),[,forceRedraw]=react.useReducer((i=>i+1),0);return traitCache(lang).getOne(id,forceRedraw)}const CACHE_ITEMS={};function itemCache(lang){return getCache(CACHE_ITEMS,"/v2/items",lang,200,2,ITEM_OVERRIDES)}function useItems(ids){const lang=(0,i18n.i$)(),[,forceRedraw]=react.useReducer((i=>i+1),0);return itemCache(lang).getMultiple(ids,forceRedraw)}},"../gw2-ui/src/helpers/apiAttributes.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={Power:"Power",Precision:"Precision",Toughness:"Toughness",Vitality:"Vitality",BoonDuration:"Concentration",ConditionDamage:"Condition Damage",ConditionDuration:"Expertise",CritDamage:"Ferocity",Healing:"Healing Power",AgonyResistance:"Agony Resistance",None:"No Attribute"}},"../node_modules/.pnpm/css-loader@6.11.0_webpack@5.94.0_esbuild@0.23.1_/node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[12].use[1]!../gw2-ui/src/components/DetailsFact/DetailsFact.module.css":(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_pnpm_css_loader_6_11_0_webpack_5_94_0_esbuild_0_23_1_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../node_modules/.pnpm/css-loader@6.11.0_webpack@5.94.0_esbuild@0.23.1_/node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_pnpm_css_loader_6_11_0_webpack_5_94_0_esbuild_0_23_1_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_pnpm_css_loader_6_11_0_webpack_5_94_0_esbuild_0_23_1_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_pnpm_css_loader_6_11_0_webpack_5_94_0_esbuild_0_23_1_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../node_modules/.pnpm/css-loader@6.11.0_webpack@5.94.0_esbuild@0.23.1_/node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_pnpm_css_loader_6_11_0_webpack_5_94_0_esbuild_0_23_1_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_pnpm_css_loader_6_11_0_webpack_5_94_0_esbuild_0_23_1_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".DetailsFact-module__factRoot__tvrS1 {\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n}\n\n.DetailsFact-module__factIconWrapper__F4fbm {\n  display: flex;\n  flex-direction: row;\n  font-size: 30px;\n}\n\n.DetailsFact-module__factIcon__Dp97a {\n  margin-right: 0px;\n}\n\n.DetailsFact-module__factText__FCBty {\n  margin-left: 4px;\n  color: var(--gw2-color-details-muted);\n  align-self: center;\n}\n","",{version:3,sources:["webpack://./../gw2-ui/src/components/DetailsFact/DetailsFact.module.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,eAAe;AACjB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,gBAAgB;EAChB,qCAAqC;EACrC,kBAAkB;AACpB",sourcesContent:[".factRoot {\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n}\n\n.factIconWrapper {\n  display: flex;\n  flex-direction: row;\n  font-size: 30px;\n}\n\n.factIcon {\n  margin-right: 0px;\n}\n\n.factText {\n  margin-left: 4px;\n  color: var(--gw2-color-details-muted);\n  align-self: center;\n}\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={factRoot:"DetailsFact-module__factRoot__tvrS1",factIconWrapper:"DetailsFact-module__factIconWrapper__F4fbm",factIcon:"DetailsFact-module__factIcon__Dp97a",factText:"DetailsFact-module__factText__FCBty"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___}}]);